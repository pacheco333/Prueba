<div class="min-h-screen bg-gray-100 p-8">
  <div class="max-w-6xl mx-auto bg-white rounded-lg shadow-sm p-8">
    <!-- Encabezado -->
    <h1 class="text-3xl font-bold text-blue-900 mb-2">Consultar solicitudes radicadas</h1>
    <p class="text-gray-600 mb-8">Ingresa el ID del asesor y presiona buscar</p>

    <!-- Formulario de búsqueda -->
    <div class="mb-12">
      <label class="block text-gray-700 font-medium mb-2">
        ID del asesor <span class="text-red-500">*</span>
      </label>
      <div class="flex gap-4 items-start">
        <div class="flex-1 max-w-md">
          <input
            type="text"
            [(ngModel)]="asesorId"
            placeholder="Ej: 1"
            [disabled]="cargando"
            (keyup.enter)="buscarSolicitudes()"
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100"
          />
          <p class="text-sm text-gray-500 mt-2">Ingrese el ID del asesor</p>
        </div>
        <button
          (click)="buscarSolicitudes()"
          [disabled]="cargando || !asesorId.trim()"
          class="px-8 py-3 bg-blue-900 text-white rounded-lg font-medium hover:bg-blue-800 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed"
        >
          {{ cargando ? 'Buscando...' : 'Buscar' }}
        </button>
        <button
          *ngIf="busquedaRealizada"
          (click)="limpiarBusqueda()"
          class="px-6 py-3 bg-gray-500 text-white rounded-lg font-medium hover:bg-gray-600 transition-colors"
        >
          Limpiar
        </button>
      </div>

      <!-- Mensaje de error -->
      <div *ngIf="error" class="mt-4 p-4 bg-red-50 border border-red-200 rounded-lg">
        <p class="text-red-700">{{ error }}</p>
      </div>
    </div>

    <!-- Tabla de solicitudes -->
    <div>
      <h2 class="text-2xl font-bold text-blue-900 mb-6">Solicitudes recientes</h2>
      
      <!-- Mensaje cuando no hay solicitudes -->
      <div *ngIf="solicitudes.length === 0 && !cargando && busquedaRealizada && !error" class="text-center py-12">
        <p class="text-gray-500 text-lg">No se encontraron solicitudes para este asesor</p>
      </div>

      <!-- Mensaje inicial -->
      <div *ngIf="solicitudes.length === 0 && !busquedaRealizada" class="text-center py-12">
        <p class="text-gray-400 text-lg">Ingrese un ID de asesor para buscar solicitudes</p>
      </div>

      <!-- Indicador de carga -->
      <div *ngIf="cargando" class="text-center py-12">
        <div class="inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-900"></div>
        <p class="text-gray-600 mt-4">Buscando solicitudes...</p>
      </div>

      <!-- Tabla -->
      <div *ngIf="solicitudes.length > 0" class="overflow-x-auto">
        <table class="w-full">
          <thead>
            <tr class="border-b-2 border-gray-200">
              <th class="text-left py-4 px-4 font-semibold text-blue-900">ID Asesor</th>
              <th class="text-left py-4 px-4 font-semibold text-blue-900">ID solicitud</th>
              <th class="text-left py-4 px-4 font-semibold text-blue-900">Cédula</th>
              <th class="text-left py-4 px-4 font-semibold text-blue-900">Fecha</th>
              <th class="text-left py-4 px-4 font-semibold text-blue-900">Estado</th>
              <th class="text-left py-4 px-4 font-semibold text-blue-900">Producto</th>
              <th class="text-left py-4 px-4 font-semibold text-blue-900">Acción</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let solicitud of solicitudes" class="border-b border-gray-200 hover:bg-gray-50">
              <td class="py-6 px-4 text-gray-800">{{ solicitud.id_asesor }}</td>
              <td class="py-6 px-4 text-gray-800 font-medium">{{ solicitud.id_solicitud }}</td>
              <td class="py-6 px-4 text-gray-800">{{ solicitud.cedula }}</td>
              <td class="py-6 px-4 text-gray-800">{{ solicitud.fecha }}</td>
              <td class="py-6 px-4">
                <span 
                  class="px-4 py-1 rounded-full text-sm font-medium"
                  [ngClass]="obtenerClaseEstado(solicitud.estado)"
                >
                  {{ solicitud.estado }}
                </span>
              </td>
              <td class="py-6 px-4 text-gray-800">{{ solicitud.producto }}</td>
              <td class="py-6 px-4">
                <button 
                  (click)="verDetalle(solicitud)"
                  class="px-6 py-2 border-2 border-blue-900 text-blue-900 rounded-lg font-medium hover:bg-blue-50 transition-colors cursor-pointer"
                >
                  Ver
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
